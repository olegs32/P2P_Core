<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAdES Plugin - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîê CAdES Plugin</h1>
            <p class="subtitle">–°–∞–º–æ–ø–∏—Å–Ω—ã–π –∞–Ω–∞–ª–æ–≥ CAdES plugin –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≠–¶–ü –≤ –±—Ä–∞—É–∑–µ—Ä–µ</p>
        </header>

        <!-- –°–µ–∫—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
        <section id="auth-section" class="card">
            <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
            <div class="form-group">
                <label for="api-url">URL —Å–µ—Ä–≤–∏—Å–∞:</label>
                <input type="text" id="api-url" value="https://localhost:8001/rpc" placeholder="https://localhost:8001/rpc">
            </div>
            <div class="form-group">
                <label for="auth-token">JWT —Ç–æ–∫–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
                <input type="text" id="auth-token" placeholder="–í–≤–µ–¥–∏—Ç–µ JWT —Ç–æ–∫–µ–Ω">
            </div>
            <button onclick="initializePlugin()" class="btn btn-primary">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
            <div id="connection-status" class="status"></div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ -->
        <section id="certs-section" class="card" style="display: none;">
            <h2>üìú –ú–æ–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</h2>

            <!-- –ò–º–ø–æ—Ä—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ -->
            <div class="subsection">
                <h3>–ò–º–ø–æ—Ä—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞</h3>
                <div class="form-group">
                    <label for="pfx-file">–§–∞–π–ª PKCS#12 (.pfx, .p12):</label>
                    <input type="file" id="pfx-file" accept=".pfx,.p12">
                </div>
                <div class="form-group">
                    <label for="pfx-password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="pfx-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                </div>
                <button onclick="importCertificate()" class="btn btn-success">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ -->
            <div class="subsection">
                <h3>–°–ø–∏—Å–æ–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤</h3>
                <button onclick="loadCertificates()" class="btn btn-primary">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
                <div id="certs-list" class="certs-list"></div>
            </div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ -->
        <section id="sign-section" class="card" style="display: none;">
            <h2>‚úçÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏</h2>

            <div class="form-group">
                <label for="sign-cert-select">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:</label>
                <select id="sign-cert-select">
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç --</option>
                </select>
            </div>

            <div class="form-group">
                <label>–î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–ø–∏—Å–∏:</label>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="sign-data-type" value="text" checked>
                        –¢–µ–∫—Å—Ç
                    </label>
                    <label>
                        <input type="radio" name="sign-data-type" value="file">
                        –§–∞–π–ª
                    </label>
                </div>
            </div>

            <div id="sign-text-input" class="form-group">
                <label for="sign-text">–¢–µ–∫—Å—Ç:</label>
                <textarea id="sign-text" rows="5" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å–∏"></textarea>
            </div>

            <div id="sign-file-input" class="form-group" style="display: none;">
                <label for="sign-file">–§–∞–π–ª:</label>
                <input type="file" id="sign-file">
            </div>

            <div class="form-group">
                <label for="sign-password">–ü–∞—Ä–æ–ª—å –æ—Ç –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞:</label>
                <input type="password" id="sign-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" id="sign-detached" checked>
                    –û—Ç—Å–æ–µ–¥–∏–Ω–µ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å
                </label>
            </div>

            <button onclick="signData()" class="btn btn-primary">–ü–æ–¥–ø–∏—Å–∞—Ç—å</button>

            <div id="sign-result" class="result-box" style="display: none;">
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥–ø–∏—Å–∏</h3>
                <div id="sign-result-content"></div>
                <button onclick="downloadSignature()" class="btn btn-secondary">–°–∫–∞—á–∞—Ç—å –ø–æ–¥–ø–∏—Å—å</button>
            </div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ -->
        <section id="verify-section" class="card" style="display: none;">
            <h2>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏</h2>

            <div class="form-group">
                <label>–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</label>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="verify-data-type" value="text" checked>
                        –¢–µ–∫—Å—Ç
                    </label>
                    <label>
                        <input type="radio" name="verify-data-type" value="file">
                        –§–∞–π–ª
                    </label>
                </div>
            </div>

            <div id="verify-text-input" class="form-group">
                <label for="verify-text">–¢–µ–∫—Å—Ç:</label>
                <textarea id="verify-text" rows="5" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç"></textarea>
            </div>

            <div id="verify-file-input" class="form-group" style="display: none;">
                <label for="verify-file">–§–∞–π–ª:</label>
                <input type="file" id="verify-file">
            </div>

            <div class="form-group">
                <label for="verify-signature-file">–§–∞–π–ª –ø–æ–¥–ø–∏—Å–∏:</label>
                <input type="file" id="verify-signature-file" accept=".sig">
            </div>

            <button onclick="verifySignature()" class="btn btn-primary">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>

            <div id="verify-result" class="result-box" style="display: none;">
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏</h3>
                <div id="verify-result-content"></div>
            </div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <section id="stats-section" class="card" style="display: none;">
            <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <button onclick="loadStatistics()" class="btn btn-primary">–û–±–Ω–æ–≤–∏—Ç—å</button>
            <div id="stats-content" class="stats-grid"></div>
        </section>
    </div>

    <script src="js/cades-plugin.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
